
       if (snapshot.exists()) {
                let timerKey = `timer${snapshot.val()}`;
                timerRef.child(timerKey).get().then(timeSnap => {
                    let time = timeSnap.exists() ? timeSnap.val() : 60;
                    time += amount;
                    if (time < 0) time = 0;
                    timerRef.child(timerKey).set(time);
                });
            }
        });
    };

   window.startTimer = function() {
    selectedRef.get().then(snapshot => {
        if (snapshot.exists()) {
            let timerKey = `timer${snapshot.val()}`;

            if (intervals[timerKey]) {
                return;
            }

            playTicking(); // ðŸ”Š Start tikkende klok

            intervals[timerKey] = setInterval(() => {
                timerRef.child(timerKey).get().then(timeSnap => {
                    let time = timeSnap.exists() ? timeSnap.val() : 60;
                    if (time > 0) {
                        time--;
                        timerRef.child(timerKey).set(time);
                    } else {
                        clearInterval(intervals[timerKey]);
                        intervals[timerKey] = null;
                        stopTicking(); // ðŸ”‡ Stop tikkende klok
                    }
                });
            }, 1000);
        }
    });
};


    window.stopTimer = function() {
    selectedRef.get().then(snapshot => {
        if (snapshot.exists()) {
            let timerKey = `timer${snapshot.val()}`;
            if (intervals[timerKey]) {
                clearInterval(intervals[timerKey]);
                intervals[timerKey] = null;
                stopTicking(); // ðŸ”‡ Stop tikkende klok
            }
        }
    });
};

    window.resetTimer = function() {
        timerRef.set({
            timer1: 60, timer2: 60, timer3: 60, timer4: 60
        });
    };

    timerRef.on("value", snapshot => {
        if (snapshot.exists()) {
            let data = snapshot.val();
            Object.keys(data).forEach(key => {
                document.getElementById(key).textContent = data[key];
            });
        }
    });

    window.editTeamName = function(teamNumber) {
        let display = document.getElementById(`displayTeam${teamNumber}`);
        let input = document.getElementById(`team${teamNumber}`);
        display.style.display = "none";
        input.style.display = "block";
        input.value = display.textContent;
        input.focus();
    };

    window.saveTeamName = function(teamNumber) {
        let display = document.getElementById(`displayTeam${teamNumber}`);
        let input = document.getElementById(`team${teamNumber}`);
        if (input.value.trim() !== "") {
            display.textContent = input.value;
            teamRef.child(`team${teamNumber}`).set(input.value);  // Opslaan in Firebase
        }
        input.style.display = "none";
        display.style.display = "block";
    };

    // âœ… Firebase luistert naar wijzigingen in teamnamen en past de UI direct aan
    teamRef.on("value", snapshot => {
        if (snapshot.exists()) {
            let data = snapshot.val();
            Object.keys(data).forEach(key => {
                let teamNumber = key.replace("team", "");
                let display = document.getElementById(`displayTeam${teamNumber}`);
                if (display) {
                    display.textContent = data[key];
                }
            });
        }
    });

    // âœ… Controleer of de URL '?view=display' bevat en verberg de knoppen indien nodig
    function hideControlsIfNeeded() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get("view") === "display") {
            document.getElementById("controls").style.display = "none";
        }
    }

    // âœ… Roep de functie aan zodra de pagina geladen is
    hideControlsIfNeeded();
});
 
    
    </script>
</body>
</html>
